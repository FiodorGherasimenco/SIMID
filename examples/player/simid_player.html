<!-- <html>
<head>
  <title> A very simple SIMID player</title>
  <script src="../simid_protocol.js"></script>
  <script src="simid_player.js"></script>
  <style>
    .linear_simid_creative {
      position: absolute;
      top: 0;
      border-width: 0px;
      width: 640px;
      height: 480px;
    }
    .overlayed {
      position: absolute;
      top: 0;
      width: 640px;
      height: 480px;
    }
    .content {
      width: 640px;
      height: 480px;
    }
    .resize_inputs {
      width: 50px;
    }
    .hidden {
      display: none;
    }    
    .ad_type_label {
      font-size: 16px;
    }
  </style>
  <script>
		/** If ad type is linear, a media file input appears while non-linear ads ask for dimensions instead. */
    function setInputsForAdType() {
      let linearButton = document.getElementById("linear_ad");
      let creativeDimensions = document.getElementById("creative_dimensions");
      let mediaFile = document.getElementById("media_file");
      
      if (linearButton.checked) {
        creativeDimensions.classList.add("hidden");
        mediaFile.classList.remove("hidden");
     
      } else {
        creativeDimensions.classList.remove("hidden");
        mediaFile.classList.add("hidden");
      }
    }

    let simidPlayer;
    function initAd() {
      // clean old ad if it exists
      if (simidPlayer) {
        simidPlayer.stopAd();
      }

      let isLinear = document.getElementById("linear_ad").checked;
      // Init ad should be called before playad.
      simidPlayer = new SimidPlayer(() => {simidPlayer = null;}, isLinear);
      simidPlayer.initializeAd();
    }

    function playAd() {
      if (!simidPlayer) {
        initAd();
      }
      simidPlayer.playAd();
      simidPlayer.setCreativeControlsState_(ENABLED);
    }

    function closeAd() {
      if (!simidPlayer) {
        return;
      }
      simidPlayer.stopAd();
      simidPlayer.sendLog("User clicked close ad button on player");
      simidPlayer.setCreativeControlsState_(DISABLED);
    }

    function skipAd() {
      if (!simidPlayer) {
        return;
      }
      simidPlayer.skipAd();
      simidPlayer.sendLog("User clicked skip ad button on player");
      simidPlayer.setCreativeControlsState_(DISABLED);
    }

    function fatalError() {
      if (!simidPlayer) {
        return;
      }
      simidPlayer.stopAd();
      simidPlayer.sendLog("User clicked fatal error button on player");
      simidPlayer.setCreativeControlsState_(DISABLED);
    }

    function switchCreative(value) {
      document.getElementById('creative_url').value = '../creatives/' + value;
      // populate ad parameters with some hard coded values
      let adParams = '';
      switch (value) {
        case 'simid_overlay.html':
          break;
        case 'survey.html':
          let adParamsObj = [
            {'question':'Would you like a survey?',
             'answers':['Yes', 'No', 'Not Sure']},
            {'question':'Are you certain?',
             'answers':['Of course', 'Not Really', 'Well...']},
            {'question':'What animals do you like?',
             'answers':['Cats', 'Dogs', 'Other']}
          ];
          adParams = JSON.stringify(adParamsObj);
          break;
      }
      document.getElementById('ad_params').value = adParams;
    }
  </script>
</head>

<body>

  <div>
    <p><h1><center>SIMID Sample Ad Player</center></h1></p>
    <table>
      <tr>
        <td>Choose Sample Creative Template</td>
        <td>
        <button onclick="switchCreative('simid_overlay.html')">overlay</button>
        <button onclick="switchCreative('survey.html')">survey</button>
        <button onclick="switchCreative('selector.html')">selector</button>
        <button onclick="switchCreative('extender.html')">extender</button>
        <button onclick="switchCreative('testers_nonlinear.html')">testers_nonlinear</button>
      </td>
      </tr>
      <tr>
        <td>Ad type</td>
        <td>
          <input type="radio" id="linear_ad" name="ad_type" onclick="setInputsForAdType()" checked> <label for="linear_ad" class="ad_type_label">Linear
        Ad</label>
        <input type="radio" id="nonlinear_ad" name="ad_type" onclick="setInputsForAdType()"> <label for="nonlinear_ad" class="ad_type_label">Non-Linear
          Ad</label>
        </td>
      </tr>
      <tr id="creative_dimensions" class="hidden">
        <td>Creative Dimensions</td>
        <td>
          <label for="x_val">X: </label>
          <input type="number" id="x_val" value="5" min="0" class="resize_inputs">

          <label for="y_val">Y: </label>
          <input type="number" id="y_val" value="5" min="0" class="resize_inputs">

          <label for="width">Width: </label>
          <input type="number" id="width" value="500" min="0" class="resize_inputs">

          <label for="height">Height: </label>
          <input type="number" id="height" value="120" min="0" class="resize_inputs">
        </td>
      </tr>
      <tr id="media_file">
        <td>Media File</td>
        <td><input type="text" id="video_url" size = 30 
           value="../media/IAB480-small.mp4">
        </td>
      </tr>
      <tr>
        <td>Interactive Creative File</td>
        <td><input type="text" id="creative_url" size = 30 
           value="../creatives/simid_overlay.html">
        </td>
      </tr>
      <tr>
        <td>AdParameters</td>
        <td><textarea id="ad_params" rows = 5 cols = 50></textarea></td>
      </tr>
    </table>
    <button onclick="playAd()"> Start ad playback </button>
    <button onclick="initAd()"> Initialize the creative </button>
    <button class="ad_request" onclick="closeAd()" disabled> Close the ad </button> 
    <button class="ad_request" onclick="skipAd()" disabled> Skip ad </button>
    <button class="ad_request" onclick="fatalError()" disabled> Fatal Error </button>
  </div>

  <div id="player_div" style="position:absolute;">
    <video id="video_player" class="content" src="../media/fakeContent.mp4" controls> </video>
    <div id="ad_video_div" class="overlayed" style="display:none;">
      <video id="ad_video_player" class="overlayed" style="display:none;" src="">
    </div>
    <!-- SIMID creative will be here. -->
  <!-- </div>

<script>
</script>
<body>

</html> -->
<html>
	<body>
    <div id="content_box">
    </div>
		<script>

      class DrawingTool {
        constructor() {
          this.previousX_ = 0;
          this.previousY_ = 0;
          this.function_ = (event) => this.onMouseMove_(event);
        }
        
        setupCanvasAndListeners() {
          let canvas = document.createElement('canvas');
          canvas.id = "drawing_area";
          canvas.style.cursor = 'crosshair';
          canvas.style.borderStyle = 'solid';

          let context = canvas.getContext('2d');
          context.strokeStyle = 'rgb(0,0,0)';
          context.lineWidth = 2;
          
          let contentBox = document.getElementById("content_box");
          contentBox.appendChild(canvas);

          canvas.addEventListener('mousedown', (event) => this.onMouseDown_(event));
          canvas.addEventListener('mouseup', (event) => this.onMouseUp_(event));
        }

        onMouseDown_(event) {
          this.previousX_ = event.clientX;
          this.previousY_ = event.clientY;

          let canvas = document.getElementById('drawing_area');
          canvas.addEventListener('mousemove', this.function_);
        }

        onMouseUp_(event) {
          let canvas = document.getElementById('drawing_area');
          canvas.removeEventListener('mousemove', this.function_);
        }

        onMouseMove_(event) {
          let canvas = document.getElementById('drawing_area');
          let context = canvas.getContext('2d');

          // const canvasRect = canvas.getBoundingClientRect();
          // const newX = event.

          
          context.beginPath();
          context.moveTo(this.previousX_, this.previousY_);
          context.lineTo(event.clientX, event.clientY);
          context.stroke();

          this.previousX_ = event.clientX;
          this.previousY_ = event.clientY;

        }
      }

      let drawingTool = new DrawingTool();
      drawingTool.setupCanvasAndListeners();

      
// 			var canvas, context, mouse = { x: 0, y: 0 };

// init();

// function init() {

//   canvas = document.createElement( 'canvas' );
//   canvas.width = window.innerWidth;
//   canvas.height = window.innerHeight;
//   canvas.style.cursor = 'crosshair';

//   context = canvas.getContext( '2d' );
//   context.strokeStyle = 'rgb(0,0,0)';
//   context.lineWidth = 0.5;

//   document.addEventListener( 'mousedown', onDocumentMouseDown, false );
//   document.addEventListener( 'mouseup', onDocumentMouseUp, false );

//   document.body.appendChild( canvas );

// }

// function onDocumentMouseDown( event ) {

//   mouse.x = event.clientX;
//   mouse.y = event.clientY;

//   document.addEventListener( 'mousemove', onDocumentMouseMove, false );

// }

// function onDocumentMouseUp( event ) {

//   document.removeEventListener( 'mousemove', onDocumentMouseMove, false );

// }

// function onDocumentMouseMove( event ) {

//   context.beginPath();
//   context.moveTo( mouse.x, mouse.y );
//   context.lineTo( event.clientX, event.clientY );
//   context.stroke();

//   mouse.x = event.clientX;
//   mouse.y = event.clientY;

// }

		</script>
	</body>
</html>